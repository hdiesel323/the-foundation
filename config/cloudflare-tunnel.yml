# Cloudflare Tunnel Ingress Rules
# Applied via Zero Trust Dashboard or wrangler CLI
# Reference: config/cloudflared-setup.md
#
# Note: These routes are configured in the Cloudflare Zero Trust dashboard
# under Networks > Tunnels > openclaw-tunnel > Public Hostname.
# This file serves as the canonical reference for what should be configured.

tunnel: openclaw-tunnel

ingress:
  # Main Gateway (Seldon Protocol + Dashboard)
  - hostname: openclaw.yourdomain.com
    service: http://openclaw:8080
    # Includes:
    #   /health          — Health check
    #   /dashboard       — Command Center web UI
    #   /seldon/agents   — Agent registry
    #   /seldon/status   — System status
    #   /seldon/divisions — Division structure
    #   /seldon/dispatch — Task dispatch
    #   /seldon/handoff  — Agent handoff
    #   /seldon/handoffs/:agentId — Pending handoffs

  # Grafana (admin/debug only)
  - hostname: grafana.yourdomain.com
    service: http://grafana:3000

  # Catch-all (required by cloudflared)
  - service: http_status:404

# Access Policy (configured in Zero Trust dashboard):
#   Application: OpenClaw
#   Protected hostnames: openclaw.yourdomain.com, grafana.yourdomain.com
#   Policy: "Only Me" — email-only auth, single admin email
#   Session duration: 24 hours
#   Dashboard route /dashboard is protected by the same policy
